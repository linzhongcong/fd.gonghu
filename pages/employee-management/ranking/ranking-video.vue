<template>
	<div class="box">
		<Card>
			<!-- 顶部按钮 -->
			<div slot="title">
				<Row>
					<Col span="8">
						<Button type="info" @click="onBack" v-if="type != 'look'">返回</Button>
					</Col>

					<Col span="8" offset="16" style="text-align: right;" v-if="type === 'look'">
						<Button type="info" @click="onBack">返回</Button>
					</Col>
					<Col span="8" offset="8" style="text-align: right;" v-if="type != 'look'">
						<Button
							@click="
								modelShow = true
								text = ''
							"
							>不通过</Button
						>
						<Button type="info" @click="onAduit(id, 'yes')" :loading="yesbtnLading">通过</Button>
					</Col>
				</Row>
			</div>
			<Row>
				<Col span="12">
					<div class="empty" v-if="!data.url">
						<svg
							t="1598065382045"
							class="icon"
							viewBox="0 0 1092 1024"
							version="1.1"
							xmlns="http://www.w3.org/2000/svg"
							p-id="2849"
							width="200"
							height="200"
						>
							<path
								d="M218.390473 207.062983c0 6.78895 3.394475 12.446409 9.051933 15.840884 5.657459 3.394475 12.446409 3.394475 19.23536 0 5.657459-3.394475 9.051934-9.051934 9.051933-15.840884 0-10.183425-9.051934-19.235359-19.235359-19.235359-9.051934 0-18.103867 9.051934-18.103867 19.235359z m739.99558-27.155801c-14.709392 0-26.024309 12.446409-26.02431 27.155801s11.314917 27.155801 26.02431 27.155802c14.709392 0 26.024309-12.446409 26.024309-27.155802 1.131492-15.840884-11.314917-27.155801-26.024309-27.155801z m0 46.391161c-11.314917 0-20.366851-9.051934-20.366851-20.366851s9.051934-20.366851 20.366851-20.366851c11.314917 1.131492 19.235359 9.051934 20.366851 20.366851 0 11.314917-9.051934 20.366851-20.366851 20.366851z m-244.40221 554.430939c-11.314917-32.81326-21.498343-65.626519-32.81326-98.439779-15.840884-49.785635-32.81326-98.439779-49.785635-148.225415-3.394475-10.183425-12.446409-16.972376-22.629834-16.972375H442.425832v-1.131492c1.131492-1.131492-1.131492-2.262983-2.262984-3.394475-2.262983-1.131492-5.657459-1.131492-7.920442 1.131492-1.131492 1.131492-1.131492 2.262983-2.262983 2.262983H177.656771c-4.525967 0-9.051934-1.131492-12.446409 1.131492-7.920442 2.262983-12.446409 7.920442-15.840884 15.840884h1.131492c-15.840884 45.259669-30.550276 90.519337-45.259669 136.910497l-32.813259 100.702762-1.131492 2.262984c-2.262983 6.78895-4.525967 12.446409-3.394475 20.366851v195.748066c0 5.657459 0 15.840884 7.920442 22.629834 5.657459 5.657459 13.577901 5.657459 19.235359 5.657459 1.131492 0 1.131492 0 1.131492-1.131492h595.164641c4.525967 0 12.446409-1.131492 18.103867-5.657459 4.525967-4.525967 6.78895-10.183425 6.78895-18.103867V794.307182c-1.131492-4.525967-1.131492-7.920442-2.262983-13.5779z m-14.709392 18.103867v193.485083c0 4.525967-1.131492 5.657459-1.131492 5.657459l-1.131492 1.131491c-1.131492 1.131492-3.394475 1.131492-5.657458 1.131492H95.057876c-3.394475 0-7.920442 1.131492-9.051934-1.131492l-1.131491-1.131491c-2.262983-2.262983-2.262983-5.657459-2.262984-10.183426V793.175691h-10.183425l10.183425-1.131492c-1.131492-4.525967 1.131492-9.051934 2.262984-13.577901l1.131491-2.262983 32.81326-100.702763c15.840884-45.259669 30.550276-90.519337 45.259668-136.910497l-4.525966-2.262983 5.657458 1.131492c1.131492-2.262983 2.262983-4.525967 4.525967-4.525967h246.665193c-4.525967 4.525967-9.051934 9.051934-13.5779 14.709392-2.262983 2.262983-2.262983 4.525967 0 7.920442 2.262983 2.262983 4.525967 2.262983 7.920442 0 7.920442-6.78895 13.577901-14.709392 19.235359-21.498343h179.907182c2.262983 0 5.657459 2.262983 5.657459 4.525967l49.785635 148.225415c11.314917 32.81326 21.498343 65.626519 32.81326 98.439779 1.131492 2.262983 1.131492 5.657459 1.131492 9.051933v4.525967z m-23.761326-16.972376H491.079975c-5.657459 0-12.446409 1.131492-18.103867 6.788951s-5.657459 14.709392-6.78895 18.103867c-1.131492 16.972376-7.920442 32.81326-18.103868 46.39116-12.446409 14.709392-31.681768 24.892818-52.048618 24.892818-15.840884 1.131492-32.81326-4.525967-46.391161-14.709392-18.103867-12.446409-29.418785-33.944751-30.550276-55.443094-1.131492-4.525967-1.131492-14.709392-7.920442-20.366851-5.657459-4.525967-12.446409-5.657459-18.103867-5.657459H108.635777c-4.525967 0-9.051934 4.525967-9.051934 9.051934s4.525967 9.051934 9.051934 9.051934h183.301657c3.394475 1.131492 5.657459 1.131492 5.657459 1.131492l1.131491 1.131491c1.131492 1.131492 2.262983 5.657459 2.262984 9.051934 1.131492 27.155801 14.709392 53.18011 37.339226 69.020994 15.840884 11.314917 33.944751 18.103867 53.180111 18.103868 2.262983 0 3.394475-1.131492 5.657458-1.131492 24.892818-1.131492 47.522652-12.446409 63.363536-30.550276 14.709392-15.840884 21.498343-36.207735 22.629834-56.574586 1.131492-1.131492 1.131492-5.657459 2.262984-6.78895l1.131492-1.131492c1.131492-1.131492 2.262983-1.131492 5.657458-1.131491h183.301658c4.525967 0 9.051934-4.525967 9.051933-9.051934 0-5.657459-4.525967-10.183425-9.051933-10.183426z m353.025414-354.156906s-13.577901 45.259669-39.60221 52.048619c0 0 32.81326 13.577901 39.60221 47.522652 0 0 4.525967-48.654144 44.128177-49.785635 0-1.131492-41.865193-22.629834-44.128177-49.785636z m-779.59779-350.762431s4.525967-37.339227 32.81326-38.470718c0 1.131492-32.81326-16.972376-32.81326-38.470718 0 0-10.183425 35.076243-31.681768 39.60221 1.131492 1.131492 27.155801 11.314917 31.681768 37.339226z m821.462983 276.083978s-4.525967 16.972376-14.709392 19.235359c0 0 12.446409 4.525967 14.709392 18.103868 0 0 2.262983-18.103867 15.840884-18.103868 1.131492-1.131492-14.709392-9.051934-15.840884-19.235359z m-569.140331 113.149172c12.446409-5.657459 24.892818-15.840884 36.207735-26.02431 1.131492-1.131492 2.262983-3.394475 2.262983-4.525967-1.131492-2.262983-2.262983-3.394475-3.394475-4.525966-1.131492 0-3.394475 1.131492-4.525967 1.131491-11.314917 10.183425-22.629834 18.103867-35.076243 24.892818-2.262983 1.131492-3.394475 4.525967-2.262983 6.78895 2.262983 2.262983 4.525967 3.394475 6.78895 2.262984z m-151.61989-55.443094c2.262983-1.131492 4.525967-3.394475 4.525967-5.657459-1.131492-4.525967-1.131492-7.920442-1.131492-12.446409l4.525967-15.840884c2.262983-4.525967 4.525967-7.920442 7.920442-11.314917 2.262983-2.262983 2.262983-4.525967 0-7.920442-2.262983-2.262983-4.525967-2.262983-7.920442 0-12.446409 13.577901-18.103867 30.550276-14.709392 48.654144 1.131492 3.394475 4.525967 5.657459 6.78895 4.525967z m208.194475 10.183425c9.051934-9.051934 18.103867-20.366851 26.02431-31.681768 1.131492-1.131492 1.131492-2.262983 1.131492-3.394475-1.131492-2.262983-1.131492-2.262983-2.262984-3.394475-1.131492-1.131492-2.262983-1.131492-3.394475-1.131492-1.131492 1.131492-2.262983 1.131492-3.394475 2.262984-9.051934 11.314917-16.972376 21.498343-26.024309 31.681768-2.262983 2.262983-2.262983 4.525967 1.131491 7.920442 2.262983 0 4.525967 0 6.78895-2.262984z m-176.512707-67.889503c1.131492 0 1.131492 0 2.262984-1.131491 12.446409-5.657459 28.287293-7.920442 41.865193-4.525967 2.262983 1.131492 5.657459-1.131492 5.657459-3.394475 1.131492-2.262983-1.131492-5.657459-3.394475-5.657459-14.709392-4.525967-32.81326-2.262983-48.654144 4.525967-2.262983 1.131492-3.394475 3.394475-2.262984 5.657459 0 2.262983 2.262983 4.525967 4.525967 4.525966z m81.467404 50.917127c0 2.262983 1.131492 3.394475 2.262983 4.525967 2.262983 1.131492 3.394475 1.131492 4.525967-1.131491 1.131492-1.131492 2.262983-2.262983 2.262983-4.525967-2.262983-22.629834-11.314917-39.60221-23.761326-52.048619-2.262983-2.262983-5.657459-1.131492-7.920442 1.131492-2.262983 2.262983-2.262983 4.525967 1.131492 7.920442 12.446409 9.051934 19.235359 23.761326 21.498343 44.128176zM398.297655 462.78011c-1.131492 2.262983-1.131492 5.657459 2.262983 6.788951 11.314917 5.657459 21.498343 9.051934 32.81326 11.314917h1.131492c2.262983 0 4.525967-2.262983 4.525967-4.525967 1.131492-2.262983-2.262983-4.525967-4.525967-5.657459-10.183425-1.131492-19.235359-4.525967-29.418785-9.051933-2.262983-2.262983-4.525967-1.131492-6.78895 1.131491z m74.678453-33.944751c-1.131492-1.131492-2.262983-2.262983-3.394475-2.262983-2.262983-1.131492-5.657459 2.262983-5.657459 4.525967-1.131492 13.577901-4.525967 26.024309-7.920442 38.470718-2.262983 0-4.525967 1.131492-5.657458 1.131491-2.262983 0-4.525967 2.262983-4.525967 4.525967s2.262983 4.525967 4.525967 4.525967h2.262983c-2.262983 4.525967-4.525967 9.051934-6.78895 14.709392-1.131492 2.262983-1.131492 5.657459 2.262983 6.788951 2.262983 1.131492 5.657459 1.131492 6.788951-2.262984 3.394475-5.657459 5.657459-12.446409 9.051933-19.235359 4.525967-1.131492 9.051934-1.131492 12.446409-2.262983 2.262983-1.131492 4.525967-3.394475 3.394475-5.657459-1.131492-2.262983-3.394475-4.525967-5.657458-3.394475-2.262983 1.131492-4.525967 1.131492-5.657459 1.131492 3.394475-11.314917 5.657459-23.761326 7.920442-36.207735-2.262983-2.262983-3.394475-3.394475-3.394475-4.525967z m-117.675138-6.78895c-2.262983 1.131492-2.262983 4.525967-1.131492 7.920442 5.657459 7.920442 12.446409 15.840884 21.498343 22.629834l9.051933 7.920442c2.262983 2.262983 5.657459 1.131492 7.920442-1.131492 2.262983-2.262983 1.131492-5.657459-1.131491-7.920442-3.394475-2.262983-5.657459-4.525967-9.051934-7.920442-7.920442-6.78895-14.709392-13.577901-19.235359-21.498342-2.262983-1.131492-5.657459-1.131492-7.920442 0zM633.647931 299.845304c2.262983 1.131492 5.657459 1.131492 6.788951-2.262984 11.314917-22.629834 18.103867-38.470718 18.103867-38.470718 1.131492-2.262983 1.131492-5.657459-2.262983-6.78895-1.131492-1.131492-2.262983-1.131492-4.525967 0-1.131492 1.131492-2.262983 1.131492-2.262984 2.262983 0 0-5.657459 15.840884-18.103867 38.470719-1.131492 2.262983 0 5.657459 2.262983 6.78895z m-37.339226 67.889503c2.262983 0 3.394475-1.131492 4.525967-2.262984 9.051934-13.577901 18.103867-28.287293 26.024309-41.865193 1.131492-1.131492 1.131492-2.262983 1.131492-4.525967-1.131492-1.131492-1.131492-2.262983-2.262984-3.394475-1.131492-1.131492-2.262983-1.131492-4.525967-1.131492-1.131492 1.131492-2.262983 1.131492-3.394475 2.262984-7.920442 14.709392-15.840884 28.287293-24.892817 41.865193-1.131492 1.131492-1.131492 3.394475-1.131492 4.525967 1.131492 4.525967 3.394475 4.525967 4.525967 4.525967z m87.124862-106.360221l-5.657459 64.495027 36.207735-47.522652-30.550276-16.972375z m-117.675139-69.020995l84.861879 38.470718 138.041989-109.754696-105.228729 114.280663 105.228729 35.076243 58.837569-212.720442-281.741437 134.647514zM359.826937 596.296133c11.314917-7.920442 21.498343-14.709392 31.681768-22.629835 1.131492-1.131492 2.262983-2.262983 2.262983-4.525967-1.131492-2.262983-1.131492-3.394475-3.394475-4.525966-2.262983-1.131492-3.394475-1.131492-4.525967 1.131491-10.183425 7.920442-20.366851 15.840884-31.681768 22.629835-2.262983 1.131492-3.394475 4.525967-1.131492 7.920442 1.131492 0 4.525967 1.131492 6.788951 0zM341.723069 605.348066l-4.525966-9.051933c-21.498343 12.446409-37.339227 18.103867-37.339227 18.103867l3.394475 9.051934c2.262983 0 16.972376-5.657459 38.470718-18.103868zM31.69434 285.135912s-10.183425 35.076243-31.681768 39.60221c0 0 26.024309 10.183425 31.681768 36.207734 0 0 4.525967-37.339227 32.81326-38.470718 1.131492 1.131492-31.681768-15.840884-32.81326-37.339226z m822.594475 351.893922s-4.525967 16.972376-14.709392 19.235359c0 0 12.446409 4.525967 14.709392 18.103868 0 0 2.262983-18.103867 15.840884-18.103868 0 0-15.840884-9.051934-15.840884-19.235359z m0 0"
								fill="#7DB6FF"
								p-id="2850"
							></path>
						</svg>
						<div class="text">此用户未上传视频</div>
					</div>
					<div class="video-box" v-if="data.url">
						<video :src="data.url" autoplay controls height="600px"></video>
					</div>
				</Col>
				<Col span="11" offset="1">
					<div class="title">视频信息</div>
					<div class="detaiCon">
						<div class="pim">
							<span class="pim-tite">员工姓名：</span>
							<span class="pim-con">{{ data.created_by }}</span>
							<span class="pim-tite">员工工号：</span>
							<span class="pim-con">{{ data.created_jobnum }}</span>
						</div>

						<div class="introductory">
							<span class="pim-tite">个人简介：</span>
							<p class="text">{{ data.profile }}</p>
						</div>

						<div class="introductory">
							<span class="pim-tite">视频标题：</span>
							<p class="text">{{ data.title }}</p>
						</div>

						<div class="introductory">
							<span class="pim-tite">视频简介：</span>
							<p class="text">
								{{ data.content }}
							</p>
						</div>
					</div>
				</Col>
			</Row>

			<!-- 弹窗 -->
			<Modal v-model="modelShow">
				<div class="beTitle" slot="header">
					<Icon type="ios-alert" color="#1E90FF" /> <span>您确定审核不通过吗？</span>
				</div>
				<Row>
					<Col span="4"> <span style="color:red">*</span> 原因: </Col>
					<Col span="20">
						<Input
							maxlength="30"
							show-word-limit
							type="textarea"
							placeholder="请输入原因"
							:autosize="{ minRows: 3, maxRows: 7 }"
							v-model="text"
						/>
					</Col>
				</Row>
				<div slot="footer">
					<Button type="primary" :loading="nobtnLading" @click="onAduit(id, 'no')">确定</Button>
					<Button @click="modelShow = false">取消</Button>
				</div>
			</Modal>
			<Spin size="large" fix v-if="spinShow"></Spin>
		</Card>
	</div>
</template>

<script>
export default {
	name: '',
	data() {
		return {
			id: '',
			type: '',
			//按钮loading
			yesbtnLading: false,
			//取消确定loading
			nobtnLading: false,
			//详情数据
			data: {},
			//原因
			text: '',
			//弹窗显示与否
			modelShow: false,
			//全局loading
			spinShow: true,
		}
	},

	methods: {
		getData(id) {
			this.spinShow = true
			this.$api.videoParticulars(id).then(({ code, data, message }) => {
				this.spinShow = false
				this.data = data
				// console.log(data)
			})
		},
		//是否通过确定点击
		onAduit(id, is) {
			let obj = {
				id,
				type: 'audit',
				is_pass: is,
				opinion: this.text,
			}
			if (is === 'yes') {
				this.yesbtnLading = true
			} else {
				this.nobtnLading = true
				// obj.opinion = this.text
			}

			this.$api
				.beoffline(obj)
				.then(res => {
					this.yesbtnLading = false
					this.nobtnLading = false
					if (res.code == 0) {
						this.modelShowShow = false
						this.$Message.success(res.message)
						this.$router.push({
							path: 'ranking-list',
						})
					}
				})
				.catch(erro => {
					this.yesbtnLading = false
					this.nobtnLading = false
					this.$Message.error('异常错误！')
				})
		},
		//返回
		onBack() {
			this.$router.push({
				path: 'ranking-list',
			})
		},
	},
	created() {
		this.id = this.$route.query.id
		this.type = this.$route.query.type
		this.getData(this.id)
		// console.log('id==>', this.id)
		// console.log('type==>', this.type)
	},
}
</script>

<style lang="less" scoped>
float-left {
	float: left;
}
float-right {
	float: right;
}
.video {
	width: 95%;
	height: 600px;
}
.title {
	color: rgba(0, 161, 233, 1);
	font-size: 20px;
	font-weight: bold;
}

.pim {
	padding-bottom: 5%;
}
.detaiCon {
	padding: 1rem 0;
}
.pim-tite {
	color: #999999;
}
.pim-con {
	padding-right: 10%;
}

.introductory {
	padding-bottom: 5%;
}

.text {
	width: 80%;
}
.foot-btn {
	position: absolute;
	left: 60%;
	bottom: 17px;
}

.video-box {
	width: 100%;
	height: 100%;
}

.video-box > video {
	width: 100%;
}

.empty {
	width: 100%;
	height: 100%;
	text-align: center;
	line-height: 2;
}
.empty .text {
	text-align: center;
	color: rgb(125, 182, 255);
	width: 100%;
	font-size: 1.5rem;
}
</style>
